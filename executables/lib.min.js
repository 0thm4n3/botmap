"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}var _child_process=require("child_process"),_safe=require("colors/safe"),_safe2=_interopRequireDefault(_safe),_prompt=require("prompt"),_prompt2=_interopRequireDefault(_prompt),_exports=module.exports={};_safe2["default"].setTheme({silly:"rainbow",input:"grey",verbose:"cyan",prompt:"grey",info:"green",data:"grey",help:"cyan",warn:"yellow",debug:"blue",error:"red"}),_exports.userAuth=function(){console.warn(_safe2["default"].warn("Note,that you need the permission of the target's owner !")),console.warn(_safe2["default"].warn("Are you sure you want to scan and attack: \n"+target)),console.log(_safe2["default"].prompt("Press y to continue")),_prompt2["default"].start(),_prompt2["default"].get("input",function(e,o){"y"!=o.input&&process.exit(1)})},_exports.exploit=function(e){console.log(_safe2["default"].info("Starting ...")),console.warn(_safe2["default"].warn("Once again... I hope you now what you are doing...")),(0,_child_process.exec)("service postgresql start",function(e,o,s){if(e||s){var r=e||s;console.error(_safe2["default"].error("Could not start postgresql! \n"+r)),process.exit(1)}else console.log(_safe2["default"].info("started postgresql"))}),(0,_child_process.exec)("msfconsole",function(e,o,s){if(e||s){var r=e||s;console.error(_safe2["default"].error("Could not initialize msfdb! \n"+r)),process.exit(1)}else console.log(_safe2["default"].info("started msf"))}),(0,_child_process.exec)("workspace botmap",function(e,o,s){if(e||s){var r=e||s;console.error(_safe2["default"].error("Error\n"+r)),console.error(_safe2["default"].error('Running "botmap setup" may fix this...')),process.exit(1)}else console.log(_safe2["default"].info("switched workspace"))}),console.log(_safe2["default"].info("Starting scan...")),(0,_child_process.exec)("db_nmap -sS -sV -sU -n -O "+e,function(e,o,s){if(e||s){var r=e||s;console.error(_safe2["default"].error("Could not scan target \n"+r)),process.exit(1)}else console.log(_safe2["default"].info("scan finished"))}),(0,_child_process.exec)("db_hosts",function(e,o,s){if(e||s){var r=e||s;console.error(_safe2["default"].error("Could not get host info... \n"+r)),process.exit(1)}else console.log(_safe2["default"].info("HOST:"+o))}),console.warn(warn("Note that the following action can bring you to jail ! \n Botmap can not stop the action once it started !")),(0,_child_process.exec)("db_autopwn -p -t -e",function(e,o,s){if(e||s){var r=e||s;console.error(_safe2["default"].error("Can not pwn the target... \n"+r)),process.exit(1)}else console.log(_safe2["default"].info("Exploit started... \n You will have a session if any of the exploits worked..."))})},_exports.setup=function(){console.log(_safe2["default"].info("Botmap is setting up a db workspace...")),(0,_child_process.exec)("service postgresql start",function(e,o,s){if(e||s){var r=e||s;console.error(_safe2["default"].error("Could not start postgresql \n"+r)),process.exit(1)}else console.log(_safe2["default"].info("started postgresql"))}),(0,_child_process.exec)("service metasploit start",function(e,o,s){if(e||s){var r=e||s;console.error(_safe2["default"].error("Could not start msf \n"+r)),process.exit(1)}else console.log(_safe2["default"].info("started msf"))}),(0,_child_process.exec)("workspace -a botmap",function(e,o,s){if(e||s){var r=e||s;console.error(_safe2["default"].error("Could not create workspace\n"+r)),process.exit(1)}else console.log(_safe2["default"].info("created workspace"))}),(0,_child_process.exec)("workspace botmap",function(e,o,s){if(e||s){var r=e||s;console.error(_safe2["default"].error("Could not switch to workspace \n"+r)),process.exit(1)}else console.log(_safe2["default"].info("switched workspace"))}),(0,_child_process.exec)("exit",function(e,o,s){if(e||s){var r=e||s;console.error(_safe2["default"].error("Could not exit msfdb \n"+r)),process.exit(1)}else console.log(_safe2["default"].info("exited mdfdb"))}),consoel.log(_safe2["default"].silly("Setup complete !"))};